#include <bits/stdc++.h>
#define rep(i,n) for (int i=0 ;i < (n); ++i)
using namespace std;

int main(){
    int N,M;
    int ans=0;
    cin >> N >> M;
    vector<int> a(N);
    rep(i,M){
        int k;
        cin >> k;
        rep(j,k){
            int s;
            cin >> s;
            a[s] |= 1<<i;
        }
    }
    int p=0;
    rep(i,M){
        int x;
        cin >>x;
        p |= x<<i;
    }

    rep(s,1<<N){
        // ÂÆüÈöõ„Å´„Å©„ÅÆÈõªÁêÉ„Åå„Å§„ÅÑ„Å¶„ÅÑ„Çã„Åã„ÇíÊ†ºÁ¥ç
        int t=0;
        rep(i,N){
            // i bitÁõÆ„ÅåÁ´ã„Å£„Å¶„ÅÑ„Çã„Åã„ÇíÂà§Êñ≠„Åô„Çã
            if(s>>i&1){
            // Á´ã„Å£„Å¶„ÅÑ„Åü„ÇâÊäº„Åô„Å®„Ç¢„ÇØ„Ç∑„Éß„É≥„Åô„Çã„Çà„ÄÇ
                t^=a[i];
            }
        }
        if(t==p){
            ans++;
        }

    }
    cout << ans << endl;

}

/*
indexÊèÉ„Åà„Çã„Åü„ÇÅ„Å´(0 base index)s--„Åß„Éá„ÇØ„É™„É°„É≥„Éà„Åó„Å¶„ÅÑ„Çã„ÄÇ
|= „ÅØor=„Åß„ÄÅrep j„ÅÆ„É´„Éº„Éó(kÂÄã„ÅÆ„Çπ„Ç§„ÉÉ„ÉÅ)„Çíi bitÂ∑¶„Ç∑„Éï„Éà„Åóor=„Çí„Å®„Å£„Å¶„ÅÑ„Çã„ÄÇ
„Åì„Çå„ÅßsÁï™ÁõÆ„ÅÆÈõªÁêÉ„Å´„ÅØ„Å©„ÅÆ„Çπ„Ç§„ÉÉ„ÉÅ„Åå„Å§„ÅÑ„Å¶„ÅÑ„Çã„Åã„Åå„Çè„Åã„Çã„ÄÇ

rep k„É´„Éº„Éó„ÅåÁµÇ„Çè„Å£„Åü„Çâ„Çπ„Ç§„ÉÉ„ÉÅ„ÅÆÊäº„ÅóÊñπ„ÇíÂÖ®ÈÉ®Ë©¶„Åô„ÄÇ
1<<N „ÅßN bitÁõÆ„Çà„Çä„Åó„Åü„ÅÆÂÖ®„Å¶„ÅÆÁµÑ„ÅøÂêà„Çè„Åõ„ÅåË©¶„Åõ„Çã„ÄÇ
p„Åß„ÅØÈõªÁêÉ„Åå0 or 1 „ÅßÁÇπÁÅØ„Åô„Çã„Åã„Å©„ÅÜ„Åã„ÅåÊ†ºÁ¥ç„Åï„Çå„Çã
*/